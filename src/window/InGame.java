package window;
import route.*;
import function.*;
import java.awt.Color;
import java.awt.event.KeyEvent;
import java.net.SocketException;
import java.net.UnknownHostException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.*;
import javax.swing.BorderFactory;
import javax.swing.JOptionPane;
import javax.swing.border.MatteBorder;

/**
 *
 * @author cookie
 */
public class InGame extends javax.swing.JFrame {

    /**
     * Creates new form InGame
     */
    public String player1;
    public String player2;
    public String current_player;
    private int p_cur_post, p_next_post, p_rem_post, idx_p_turn = 0, roll_dice = 0;
    private String p_turn = "";
    private long start, finish;
    private double endtime;
    private BoardMechanic bm = new BoardMechanic();
    private PlayerMechanic[] pm = new PlayerMechanic[2];
    private DatabaseGameConn dbg = new DatabaseGameConn();
    private SkillMechanic sm = new SkillMechanic();
    private InfoHandler info = new InfoHandler();
    /*    
    private DatabaseConn db = new DatabaseConn();
    */
    private JPanel[] block_map;
    public InGame() {
        initComponents();
        board_div.setBorder(new MatteBorder(0, 0, 0, 4, Color.decode("#99A7FF")));    
        this.block_map = new JPanel[] {this.block_1,this.block_2,this.block_3,this.block_4,this.block_5,this.block_6,this.block_7,this.block_8,this.block_9,this.block_10,this.block_11,this.block_12};
        this.border_turn_p2.setVisible(false);
        this.lobby_btn.setVisible(false);
        this.start = System.currentTimeMillis();
    }
    public void fetchInfo() {
        System.out.println("--INGAME--");        
        player1_val.setText(this.player1); player2_val.setText(this.player2);
        pm[0] = new PlayerMechanic(); pm[0].setUsername(player1); pm[0].setCurPost(0); pm[0].setColor("#FF9999"); pm[0].border_turn = this.border_turn_p1; pm[0].dice_btn = this.dice_btn;
        pm[1] = new PlayerMechanic(); pm[1].setUsername(player2); pm[1].setCurPost(0); pm[1].setColor("#9996F5"); pm[1].border_turn = this.border_turn_p2; pm[1].dice_btn = this.dice_btn;
        pm[0].p1_healthbar = this.p1_healthbar; pm[0].p2_healthbar = this.p2_healthbar;
        pm[1].p1_healthbar = this.p1_healthbar; pm[1].p2_healthbar = this.p2_healthbar;        
        this.p_turn = dbg.getPlayerTurn(player1, player2);
        if (p_turn.equals(pm[0].getUsername())) {idx_p_turn = 0;}
        if (p_turn.equals(pm[1].getUsername())) {idx_p_turn = 1;}             
        if (this.current_player.equals(player1)) {dice_val_lbl.setForeground(Color.decode("#FF9999"));}
        else {dice_val_lbl.setForeground(Color.decode("#9996F5"));}
        
        if (this.current_player.equals(player1)) {
            main_div.setBorder(javax.swing.BorderFactory.createLineBorder(Color.decode("#FF9999"),4));            
            board_div.setBorder(new MatteBorder(0, 0, 0, 4, Color.decode("#FF9999")));                
        } else {
            main_div.setBorder(javax.swing.BorderFactory.createLineBorder(Color.decode("#9996F5"),4));            
            board_div.setBorder(new MatteBorder(0, 0, 0, 4, Color.decode("#9996F5")));                            
        }
                
        dbg.username_p1 = this.player1; dbg.username_p2 = this.player2; dbg.current_player = this.current_player;
        dbg.pm = this.pm;
        dbg.block_map = this.block_map;
        dbg.dice_val_lbl = this.dice_val_lbl;
        dbg.start();
    }
    /**
     * This method is called from within the constructor to initialize the form. WARNING: Do NOT modify this code. The content of this method is always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        main_div = new javax.swing.JPanel();
        board_div = new javax.swing.JPanel();
        block_1 = new javax.swing.JPanel();
        jButton1 = new javax.swing.JButton();
        block_2 = new javax.swing.JPanel();
        jButton3 = new javax.swing.JButton();
        block_3 = new javax.swing.JPanel();
        jButton4 = new javax.swing.JButton();
        block_4 = new javax.swing.JPanel();
        jButton2 = new javax.swing.JButton();
        block_5 = new javax.swing.JPanel();
        jButton6 = new javax.swing.JButton();
        block_6 = new javax.swing.JPanel();
        jButton11 = new javax.swing.JButton();
        block_7 = new javax.swing.JPanel();
        jButton15 = new javax.swing.JButton();
        block_8 = new javax.swing.JPanel();
        jButton13 = new javax.swing.JButton();
        block_9 = new javax.swing.JPanel();
        jButton7 = new javax.swing.JButton();
        block_10 = new javax.swing.JPanel();
        jButton5 = new javax.swing.JButton();
        block_11 = new javax.swing.JPanel();
        jButton10 = new javax.swing.JButton();
        block_12 = new javax.swing.JPanel();
        jButton14 = new javax.swing.JButton();
        dice_div = new javax.swing.JPanel();
        dice_btn = new javax.swing.JButton();
        dice_val_lbl = new javax.swing.JLabel();
        stat_div = new javax.swing.JPanel();
        player1_val = new javax.swing.JLabel();
        player2_val = new javax.swing.JLabel();
        border_turn_p1 = new javax.swing.JPanel();
        border_turn_p2 = new javax.swing.JPanel();
        p1_healthbar = new javax.swing.JProgressBar();
        player1_val1 = new javax.swing.JLabel();
        p2_healthbar = new javax.swing.JProgressBar();
        player1_val2 = new javax.swing.JLabel();
        help_btn = new javax.swing.JButton();
        lobby_btn = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setAlwaysOnTop(true);
        setResizable(false);

        main_div.setBackground(new java.awt.Color(255, 255, 255));
        main_div.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(153, 167, 255), 4));

        board_div.setBackground(new java.awt.Color(204, 255, 204));

        block_1.setBackground(new java.awt.Color(255, 255, 255));
        block_1.setBorder(null);

        jButton1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/asset/icons8-finish-flag-64.png"))); // NOI18N
        jButton1.setBorderPainted(false);
        jButton1.setContentAreaFilled(false);
        jButton1.setFocusPainted(false);

        javax.swing.GroupLayout block_1Layout = new javax.swing.GroupLayout(block_1);
        block_1.setLayout(block_1Layout);
        block_1Layout.setHorizontalGroup(
            block_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(block_1Layout.createSequentialGroup()
                .addGap(15, 15, 15)
                .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 68, Short.MAX_VALUE)
                .addContainerGap(17, Short.MAX_VALUE))
        );
        block_1Layout.setVerticalGroup(
            block_1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, block_1Layout.createSequentialGroup()
                .addContainerGap(18, Short.MAX_VALUE)
                .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 68, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(15, 15, 15))
        );

        block_2.setBackground(new java.awt.Color(255, 255, 255));
        block_2.setBorder(null);

        jButton3.setIcon(new javax.swing.ImageIcon(getClass().getResource("/asset/icons8-fraud-64.png"))); // NOI18N
        jButton3.setBorderPainted(false);
        jButton3.setContentAreaFilled(false);
        jButton3.setFocusPainted(false);

        javax.swing.GroupLayout block_2Layout = new javax.swing.GroupLayout(block_2);
        block_2.setLayout(block_2Layout);
        block_2Layout.setHorizontalGroup(
            block_2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(block_2Layout.createSequentialGroup()
                .addGap(18, 18, 18)
                .addComponent(jButton3, javax.swing.GroupLayout.PREFERRED_SIZE, 68, Short.MAX_VALUE)
                .addGap(14, 14, 14))
        );
        block_2Layout.setVerticalGroup(
            block_2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(block_2Layout.createSequentialGroup()
                .addGap(15, 15, 15)
                .addComponent(jButton3, javax.swing.GroupLayout.PREFERRED_SIZE, 68, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(17, Short.MAX_VALUE))
        );

        block_3.setBackground(new java.awt.Color(255, 255, 255));
        block_3.setBorder(null);

        jButton4.setIcon(new javax.swing.ImageIcon(getClass().getResource("/asset/icons8-where-to-quest-64.png"))); // NOI18N
        jButton4.setBorderPainted(false);
        jButton4.setContentAreaFilled(false);
        jButton4.setFocusPainted(false);

        javax.swing.GroupLayout block_3Layout = new javax.swing.GroupLayout(block_3);
        block_3.setLayout(block_3Layout);
        block_3Layout.setHorizontalGroup(
            block_3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(block_3Layout.createSequentialGroup()
                .addGap(15, 15, 15)
                .addComponent(jButton4, javax.swing.GroupLayout.PREFERRED_SIZE, 68, Short.MAX_VALUE)
                .addGap(17, 17, 17))
        );
        block_3Layout.setVerticalGroup(
            block_3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(block_3Layout.createSequentialGroup()
                .addGap(16, 16, 16)
                .addComponent(jButton4, javax.swing.GroupLayout.PREFERRED_SIZE, 68, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(16, Short.MAX_VALUE))
        );

        block_4.setBackground(new java.awt.Color(255, 255, 255));
        block_4.setBorder(null);

        jButton2.setIcon(new javax.swing.ImageIcon(getClass().getResource("/asset/icons8-iceberg-64.png"))); // NOI18N
        jButton2.setBorderPainted(false);
        jButton2.setContentAreaFilled(false);
        jButton2.setFocusPainted(false);

        javax.swing.GroupLayout block_4Layout = new javax.swing.GroupLayout(block_4);
        block_4.setLayout(block_4Layout);
        block_4Layout.setHorizontalGroup(
            block_4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(block_4Layout.createSequentialGroup()
                .addGap(16, 16, 16)
                .addComponent(jButton2, javax.swing.GroupLayout.PREFERRED_SIZE, 68, Short.MAX_VALUE)
                .addGap(16, 16, 16))
        );
        block_4Layout.setVerticalGroup(
            block_4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(block_4Layout.createSequentialGroup()
                .addGap(15, 15, 15)
                .addComponent(jButton2, javax.swing.GroupLayout.PREFERRED_SIZE, 68, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(17, Short.MAX_VALUE))
        );

        block_5.setBackground(new java.awt.Color(255, 255, 255));
        block_5.setBorder(null);

        jButton6.setIcon(new javax.swing.ImageIcon(getClass().getResource("/asset/icons8-doughnut-64.png"))); // NOI18N
        jButton6.setBorderPainted(false);
        jButton6.setContentAreaFilled(false);
        jButton6.setFocusPainted(false);

        javax.swing.GroupLayout block_5Layout = new javax.swing.GroupLayout(block_5);
        block_5.setLayout(block_5Layout);
        block_5Layout.setHorizontalGroup(
            block_5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(block_5Layout.createSequentialGroup()
                .addGap(16, 16, 16)
                .addComponent(jButton6, javax.swing.GroupLayout.PREFERRED_SIZE, 68, Short.MAX_VALUE)
                .addGap(16, 16, 16))
        );
        block_5Layout.setVerticalGroup(
            block_5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(block_5Layout.createSequentialGroup()
                .addGap(16, 16, 16)
                .addComponent(jButton6, javax.swing.GroupLayout.PREFERRED_SIZE, 68, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(16, Short.MAX_VALUE))
        );

        block_6.setBackground(new java.awt.Color(255, 255, 255));
        block_6.setBorder(null);

        jButton11.setIcon(new javax.swing.ImageIcon(getClass().getResource("/asset/icons8-fraud-64.png"))); // NOI18N
        jButton11.setBorderPainted(false);
        jButton11.setContentAreaFilled(false);
        jButton11.setFocusPainted(false);

        javax.swing.GroupLayout block_6Layout = new javax.swing.GroupLayout(block_6);
        block_6.setLayout(block_6Layout);
        block_6Layout.setHorizontalGroup(
            block_6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(block_6Layout.createSequentialGroup()
                .addGap(18, 18, 18)
                .addComponent(jButton11, javax.swing.GroupLayout.PREFERRED_SIZE, 68, Short.MAX_VALUE)
                .addGap(14, 14, 14))
        );
        block_6Layout.setVerticalGroup(
            block_6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(block_6Layout.createSequentialGroup()
                .addGap(15, 15, 15)
                .addComponent(jButton11, javax.swing.GroupLayout.PREFERRED_SIZE, 68, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(17, Short.MAX_VALUE))
        );

        block_7.setBackground(new java.awt.Color(255, 255, 255));
        block_7.setBorder(null);

        jButton15.setIcon(new javax.swing.ImageIcon(getClass().getResource("/asset/icons8-muscle-flexing-64.png"))); // NOI18N
        jButton15.setBorderPainted(false);
        jButton15.setContentAreaFilled(false);
        jButton15.setFocusPainted(false);

        javax.swing.GroupLayout block_7Layout = new javax.swing.GroupLayout(block_7);
        block_7.setLayout(block_7Layout);
        block_7Layout.setHorizontalGroup(
            block_7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(block_7Layout.createSequentialGroup()
                .addGap(15, 15, 15)
                .addComponent(jButton15, javax.swing.GroupLayout.PREFERRED_SIZE, 68, Short.MAX_VALUE)
                .addGap(17, 17, 17))
        );
        block_7Layout.setVerticalGroup(
            block_7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(block_7Layout.createSequentialGroup()
                .addGap(16, 16, 16)
                .addComponent(jButton15, javax.swing.GroupLayout.PREFERRED_SIZE, 68, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(16, Short.MAX_VALUE))
        );

        block_8.setBackground(new java.awt.Color(255, 255, 255));
        block_8.setBorder(null);

        jButton13.setIcon(new javax.swing.ImageIcon(getClass().getResource("/asset/icons8-blow-64.png"))); // NOI18N
        jButton13.setBorderPainted(false);
        jButton13.setContentAreaFilled(false);
        jButton13.setFocusPainted(false);

        javax.swing.GroupLayout block_8Layout = new javax.swing.GroupLayout(block_8);
        block_8.setLayout(block_8Layout);
        block_8Layout.setHorizontalGroup(
            block_8Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(block_8Layout.createSequentialGroup()
                .addGap(15, 15, 15)
                .addComponent(jButton13, javax.swing.GroupLayout.PREFERRED_SIZE, 68, Short.MAX_VALUE)
                .addGap(17, 17, 17))
        );
        block_8Layout.setVerticalGroup(
            block_8Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(block_8Layout.createSequentialGroup()
                .addGap(16, 16, 16)
                .addComponent(jButton13, javax.swing.GroupLayout.PREFERRED_SIZE, 68, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(16, Short.MAX_VALUE))
        );

        block_9.setBackground(new java.awt.Color(255, 255, 255));
        block_9.setBorder(null);

        jButton7.setIcon(new javax.swing.ImageIcon(getClass().getResource("/asset/icons8-where-to-quest-64.png"))); // NOI18N
        jButton7.setBorderPainted(false);
        jButton7.setContentAreaFilled(false);
        jButton7.setFocusPainted(false);

        javax.swing.GroupLayout block_9Layout = new javax.swing.GroupLayout(block_9);
        block_9.setLayout(block_9Layout);
        block_9Layout.setHorizontalGroup(
            block_9Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(block_9Layout.createSequentialGroup()
                .addGap(15, 15, 15)
                .addComponent(jButton7, javax.swing.GroupLayout.PREFERRED_SIZE, 68, Short.MAX_VALUE)
                .addGap(17, 17, 17))
        );
        block_9Layout.setVerticalGroup(
            block_9Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(block_9Layout.createSequentialGroup()
                .addGap(16, 16, 16)
                .addComponent(jButton7, javax.swing.GroupLayout.PREFERRED_SIZE, 68, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(16, Short.MAX_VALUE))
        );

        block_10.setBackground(new java.awt.Color(255, 255, 255));
        block_10.setBorder(null);

        jButton5.setIcon(new javax.swing.ImageIcon(getClass().getResource("/asset/icons8-iceberg-64.png"))); // NOI18N
        jButton5.setBorderPainted(false);
        jButton5.setContentAreaFilled(false);
        jButton5.setFocusPainted(false);

        javax.swing.GroupLayout block_10Layout = new javax.swing.GroupLayout(block_10);
        block_10.setLayout(block_10Layout);
        block_10Layout.setHorizontalGroup(
            block_10Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(block_10Layout.createSequentialGroup()
                .addGap(16, 16, 16)
                .addComponent(jButton5, javax.swing.GroupLayout.PREFERRED_SIZE, 68, Short.MAX_VALUE)
                .addGap(16, 16, 16))
        );
        block_10Layout.setVerticalGroup(
            block_10Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(block_10Layout.createSequentialGroup()
                .addGap(16, 16, 16)
                .addComponent(jButton5, javax.swing.GroupLayout.PREFERRED_SIZE, 68, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(16, Short.MAX_VALUE))
        );

        block_11.setBackground(new java.awt.Color(255, 255, 255));
        block_11.setBorder(null);

        jButton10.setIcon(new javax.swing.ImageIcon(getClass().getResource("/asset/icons8-time-machine-64.png"))); // NOI18N
        jButton10.setBorderPainted(false);
        jButton10.setContentAreaFilled(false);
        jButton10.setFocusPainted(false);

        javax.swing.GroupLayout block_11Layout = new javax.swing.GroupLayout(block_11);
        block_11.setLayout(block_11Layout);
        block_11Layout.setHorizontalGroup(
            block_11Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(block_11Layout.createSequentialGroup()
                .addGap(16, 16, 16)
                .addComponent(jButton10, javax.swing.GroupLayout.PREFERRED_SIZE, 68, Short.MAX_VALUE)
                .addGap(16, 16, 16))
        );
        block_11Layout.setVerticalGroup(
            block_11Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(block_11Layout.createSequentialGroup()
                .addGap(14, 14, 14)
                .addComponent(jButton10, javax.swing.GroupLayout.PREFERRED_SIZE, 68, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(18, Short.MAX_VALUE))
        );

        block_12.setBackground(new java.awt.Color(255, 255, 255));
        block_12.setBorder(null);

        jButton14.setIcon(new javax.swing.ImageIcon(getClass().getResource("/asset/icons8-bribery-64.png"))); // NOI18N
        jButton14.setBorderPainted(false);
        jButton14.setContentAreaFilled(false);
        jButton14.setFocusPainted(false);

        javax.swing.GroupLayout block_12Layout = new javax.swing.GroupLayout(block_12);
        block_12.setLayout(block_12Layout);
        block_12Layout.setHorizontalGroup(
            block_12Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(block_12Layout.createSequentialGroup()
                .addGap(16, 16, 16)
                .addComponent(jButton14, javax.swing.GroupLayout.PREFERRED_SIZE, 68, Short.MAX_VALUE)
                .addGap(16, 16, 16))
        );
        block_12Layout.setVerticalGroup(
            block_12Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(block_12Layout.createSequentialGroup()
                .addGap(14, 14, 14)
                .addComponent(jButton14, javax.swing.GroupLayout.PREFERRED_SIZE, 68, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(18, Short.MAX_VALUE))
        );

        dice_div.setBackground(new java.awt.Color(255, 255, 204));

        dice_btn.setIcon(new javax.swing.ImageIcon(getClass().getResource("/asset/icons8-dice-96.png"))); // NOI18N
        dice_btn.setBorderPainted(false);
        dice_btn.setContentAreaFilled(false);
        dice_btn.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        dice_btn.setFocusPainted(false);
        dice_btn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                dice_btnActionPerformed(evt);
            }
        });

        dice_val_lbl.setFont(new java.awt.Font("JetBrains Mono", 1, 36)); // NOI18N
        dice_val_lbl.setForeground(new java.awt.Color(153, 150, 245));
        dice_val_lbl.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        dice_val_lbl.setText("--");

        javax.swing.GroupLayout dice_divLayout = new javax.swing.GroupLayout(dice_div);
        dice_div.setLayout(dice_divLayout);
        dice_divLayout.setHorizontalGroup(
            dice_divLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, dice_divLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(dice_btn)
                .addGap(40, 40, 40))
            .addGroup(dice_divLayout.createSequentialGroup()
                .addComponent(dice_val_lbl, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        dice_divLayout.setVerticalGroup(
            dice_divLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(dice_divLayout.createSequentialGroup()
                .addGap(15, 15, 15)
                .addComponent(dice_btn)
                .addGap(18, 18, 18)
                .addComponent(dice_val_lbl)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout board_divLayout = new javax.swing.GroupLayout(board_div);
        board_div.setLayout(board_divLayout);
        board_divLayout.setHorizontalGroup(
            board_divLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(board_divLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(board_divLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(board_divLayout.createSequentialGroup()
                        .addComponent(block_4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(block_3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(block_2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(board_divLayout.createSequentialGroup()
                        .addComponent(block_7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(block_8, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(block_9, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(board_divLayout.createSequentialGroup()
                        .addGroup(board_divLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(block_5, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(block_6, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(dice_div, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(board_divLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(block_10, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(block_12, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(block_1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(block_11, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        board_divLayout.setVerticalGroup(
            board_divLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(board_divLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(board_divLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(block_10, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(block_7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(block_8, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(block_9, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(board_divLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                    .addGroup(board_divLayout.createSequentialGroup()
                        .addComponent(block_11, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(block_12, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(block_1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(board_divLayout.createSequentialGroup()
                        .addComponent(block_6, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(block_5, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(block_4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(board_divLayout.createSequentialGroup()
                        .addComponent(dice_div, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(board_divLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(block_2, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(block_3, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        stat_div.setBackground(new java.awt.Color(255, 255, 255));

        player1_val.setFont(new java.awt.Font("JetBrains Mono", 3, 15)); // NOI18N
        player1_val.setForeground(new java.awt.Color(255, 153, 153));
        player1_val.setText("SUPERCOOKIE");

        player2_val.setFont(new java.awt.Font("JetBrains Mono", 3, 15)); // NOI18N
        player2_val.setForeground(new java.awt.Color(153, 150, 245));
        player2_val.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        player2_val.setText("NAZARETH666");

        border_turn_p1.setBackground(new java.awt.Color(255, 153, 153));
        border_turn_p1.setPreferredSize(new java.awt.Dimension(0, 5));

        javax.swing.GroupLayout border_turn_p1Layout = new javax.swing.GroupLayout(border_turn_p1);
        border_turn_p1.setLayout(border_turn_p1Layout);
        border_turn_p1Layout.setHorizontalGroup(
            border_turn_p1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 0, Short.MAX_VALUE)
        );
        border_turn_p1Layout.setVerticalGroup(
            border_turn_p1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 5, Short.MAX_VALUE)
        );

        border_turn_p2.setBackground(new java.awt.Color(153, 150, 245));
        border_turn_p2.setPreferredSize(new java.awt.Dimension(0, 5));

        javax.swing.GroupLayout border_turn_p2Layout = new javax.swing.GroupLayout(border_turn_p2);
        border_turn_p2.setLayout(border_turn_p2Layout);
        border_turn_p2Layout.setHorizontalGroup(
            border_turn_p2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 0, Short.MAX_VALUE)
        );
        border_turn_p2Layout.setVerticalGroup(
            border_turn_p2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 5, Short.MAX_VALUE)
        );

        p1_healthbar.setBackground(new java.awt.Color(255, 255, 255));
        p1_healthbar.setForeground(new java.awt.Color(255, 153, 153));
        p1_healthbar.setMaximum(1000);
        p1_healthbar.setValue(1000);
        p1_healthbar.setBorder(null);
        p1_healthbar.setBorderPainted(false);
        p1_healthbar.addChangeListener(new javax.swing.event.ChangeListener() {
            public void stateChanged(javax.swing.event.ChangeEvent evt) {
                p1_healthbarStateChanged(evt);
            }
        });
        p1_healthbar.addPropertyChangeListener(new java.beans.PropertyChangeListener() {
            public void propertyChange(java.beans.PropertyChangeEvent evt) {
                p1_healthbarPropertyChange(evt);
            }
        });

        player1_val1.setFont(new java.awt.Font("JetBrains Mono", 1, 12)); // NOI18N
        player1_val1.setForeground(new java.awt.Color(255, 153, 153));
        player1_val1.setText("HP");

        p2_healthbar.setBackground(new java.awt.Color(255, 255, 255));
        p2_healthbar.setForeground(new java.awt.Color(153, 150, 245));
        p2_healthbar.setMaximum(1000);
        p2_healthbar.setValue(1000);
        p2_healthbar.setBorder(null);
        p2_healthbar.setBorderPainted(false);
        p2_healthbar.addChangeListener(new javax.swing.event.ChangeListener() {
            public void stateChanged(javax.swing.event.ChangeEvent evt) {
                p2_healthbarStateChanged(evt);
            }
        });
        p2_healthbar.addPropertyChangeListener(new java.beans.PropertyChangeListener() {
            public void propertyChange(java.beans.PropertyChangeEvent evt) {
                p2_healthbarPropertyChange(evt);
            }
        });

        player1_val2.setFont(new java.awt.Font("JetBrains Mono", 1, 12)); // NOI18N
        player1_val2.setForeground(new java.awt.Color(153, 150, 245));
        player1_val2.setText("HP");

        help_btn.setIcon(new javax.swing.ImageIcon(getClass().getResource("/asset/icons8-book-64.png"))); // NOI18N
        help_btn.setToolTipText("Open Almanac");
        help_btn.setBorderPainted(false);
        help_btn.setContentAreaFilled(false);
        help_btn.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        help_btn.setFocusPainted(false);

        lobby_btn.setIcon(new javax.swing.ImageIcon(getClass().getResource("/asset/icons8-dog-house-64.png"))); // NOI18N
        lobby_btn.setToolTipText("Back to Lobby");
        lobby_btn.setBorderPainted(false);
        lobby_btn.setContentAreaFilled(false);
        lobby_btn.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        lobby_btn.setFocusPainted(false);
        lobby_btn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                lobby_btnActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout stat_divLayout = new javax.swing.GroupLayout(stat_div);
        stat_div.setLayout(stat_divLayout);
        stat_divLayout.setHorizontalGroup(
            stat_divLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, stat_divLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(stat_divLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, stat_divLayout.createSequentialGroup()
                        .addGroup(stat_divLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(border_turn_p1, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 141, Short.MAX_VALUE)
                            .addComponent(player1_val, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 141, Short.MAX_VALUE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(stat_divLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(player2_val, javax.swing.GroupLayout.DEFAULT_SIZE, 143, Short.MAX_VALUE)
                            .addComponent(border_turn_p2, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 143, Short.MAX_VALUE)))
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, stat_divLayout.createSequentialGroup()
                        .addComponent(player1_val1)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(p1_healthbar, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, stat_divLayout.createSequentialGroup()
                        .addComponent(player1_val2)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(p2_healthbar, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addGroup(stat_divLayout.createSequentialGroup()
                        .addGap(0, 0, Short.MAX_VALUE)
                        .addComponent(lobby_btn, javax.swing.GroupLayout.PREFERRED_SIZE, 48, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(help_btn, javax.swing.GroupLayout.PREFERRED_SIZE, 48, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap())
        );
        stat_divLayout.setVerticalGroup(
            stat_divLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(stat_divLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(stat_divLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(player1_val)
                    .addComponent(player2_val))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(stat_divLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(border_turn_p1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(border_turn_p2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(stat_divLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(player1_val1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(p1_healthbar, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(stat_divLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(player1_val2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(p2_healthbar, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(stat_divLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(help_btn, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(lobby_btn, javax.swing.GroupLayout.Alignment.TRAILING))
                .addContainerGap())
        );

        javax.swing.GroupLayout main_divLayout = new javax.swing.GroupLayout(main_div);
        main_div.setLayout(main_divLayout);
        main_divLayout.setHorizontalGroup(
            main_divLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(main_divLayout.createSequentialGroup()
                .addComponent(board_div, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(stat_div, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        main_divLayout.setVerticalGroup(
            main_divLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(board_div, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(stat_div, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(main_div, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(main_div, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void dice_btnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_dice_btnActionPerformed
        // TODO add your handling code here:
        this.p_turn = dbg.getPlayerTurn(player1, player2);
        if (this.p_turn.equals(this.current_player)) {            
            bm = new BoardMechanic();
            
            bm.setObjPlayer(pm);        
            bm.setBlockMap(this.block_map); 
            bm.setDiceVal(dice_val_lbl);
            bm.setPlayerTurn(p_turn);
            this.p_cur_post = dbg.getPlayerCurPost(player1, player2, p_turn);
            this.roll_dice = bm.rollDice();
            this.p_next_post = this.p_cur_post + this.roll_dice;
            if (this.p_next_post > 11) {
                this.p_rem_post = this.p_next_post - 12;
                this.p_next_post = 11;
            } else {this.p_rem_post = -1;}
            bm.setPlayerPost(this.p_cur_post,this.p_next_post,this.p_rem_post,this.roll_dice);
            bm.start();
        }
    }//GEN-LAST:event_dice_btnActionPerformed

    private void p1_healthbarPropertyChange(java.beans.PropertyChangeEvent evt) {//GEN-FIRST:event_p1_healthbarPropertyChange
        // TODO add your handling code here:
    }//GEN-LAST:event_p1_healthbarPropertyChange

    private void p2_healthbarPropertyChange(java.beans.PropertyChangeEvent evt) {//GEN-FIRST:event_p2_healthbarPropertyChange
        // TODO add your handling code here:
    }//GEN-LAST:event_p2_healthbarPropertyChange

    private void p1_healthbarStateChanged(javax.swing.event.ChangeEvent evt) {//GEN-FIRST:event_p1_healthbarStateChanged
        // TODO add your handling code here:
        System.out.println(this.p1_healthbar.getValue()+"/"+this.p1_healthbar.getMaximum()+" "+this.player1_val.getText());
        if (this.p1_healthbar.getValue() <= 0) {
            this.dice_btn.setVisible(false);
            this.dice_val_lbl.setText("");
            this.lobby_btn.setVisible(true);
            this.finish = System.currentTimeMillis();
            this.endtime = (this.finish-this.start)/60000;
            System.out.println("--\nPLAYER 2 WIN\n--");            
            System.out.println("Duration : "+this.endtime+" min | "+this.start+" - "+this.finish);
       //     dbg.updatePlayerAction(player1, player2, "--");
            if (this.current_player.equals(this.player1_val.getText())) {
                System.out.println("update player 1 kalah");
                dbg.updatePlayerDetails(this.player1_val.getText(), endtime, "LOST");                
            } else {
                System.out.println("update player 2 menang");                
                dbg.updatePlayerDetails(this.player2_val.getText(), endtime, "WIN");                                
            }
        }        
    }//GEN-LAST:event_p1_healthbarStateChanged

    private void p2_healthbarStateChanged(javax.swing.event.ChangeEvent evt) {//GEN-FIRST:event_p2_healthbarStateChanged
        // TODO add your handling code here:
        System.out.println(this.p2_healthbar.getValue()+"/"+this.p2_healthbar.getMaximum()+" "+this.player2_val.getText());        
        if (this.p2_healthbar.getValue() <= 0) {
            this.dice_btn.setVisible(false);
            this.dice_val_lbl.setText("");            
            this.lobby_btn.setVisible(true);
            this.finish = System.currentTimeMillis();
            this.endtime = (this.finish-this.start)/60000;
            System.out.println("--\nPLAYER 1 WIN\n--");            
            System.out.println("Duration : "+this.endtime+" min | "+this.start+" - "+this.finish);
        //    dbg.updatePlayerAction(player1, player2, "--");            
            if (this.current_player.equals(this.player1_val.getText())) {
                System.out.println("update player 1 menang");
                dbg.updatePlayerDetails(this.player1_val.getText(), endtime, "WIN");                                
            } else {
                System.out.println("update player 2 kalah");                
                dbg.updatePlayerDetails(this.player2_val.getText(), endtime, "LOST");                                
            }
        }                
    }//GEN-LAST:event_p2_healthbarStateChanged

    private void lobby_btnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_lobby_btnActionPerformed
        // TODO add your handling code here:
        try {
            Lobby lobby = new Lobby();
            lobby.username = this.current_player;            
            lobby.fetchInfo(this.current_player);
            lobby.setVisible(true);        
            this.dispose();            
        } catch (UnknownHostException ex) {
            Logger.getLogger(InGame.class.getName()).log(Level.SEVERE, null, ex);
        } catch (SocketException ex) {
            Logger.getLogger(InGame.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_lobby_btnActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(InGame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(InGame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(InGame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(InGame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new InGame().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel block_1;
    private javax.swing.JPanel block_10;
    private javax.swing.JPanel block_11;
    private javax.swing.JPanel block_12;
    private javax.swing.JPanel block_2;
    private javax.swing.JPanel block_3;
    private javax.swing.JPanel block_4;
    private javax.swing.JPanel block_5;
    private javax.swing.JPanel block_6;
    private javax.swing.JPanel block_7;
    private javax.swing.JPanel block_8;
    private javax.swing.JPanel block_9;
    private javax.swing.JPanel board_div;
    private javax.swing.JPanel border_turn_p1;
    private javax.swing.JPanel border_turn_p2;
    private javax.swing.JButton dice_btn;
    private javax.swing.JPanel dice_div;
    private javax.swing.JLabel dice_val_lbl;
    private javax.swing.JButton help_btn;
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton10;
    private javax.swing.JButton jButton11;
    private javax.swing.JButton jButton13;
    private javax.swing.JButton jButton14;
    private javax.swing.JButton jButton15;
    private javax.swing.JButton jButton2;
    private javax.swing.JButton jButton3;
    private javax.swing.JButton jButton4;
    private javax.swing.JButton jButton5;
    private javax.swing.JButton jButton6;
    private javax.swing.JButton jButton7;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JButton lobby_btn;
    private javax.swing.JPanel main_div;
    private javax.swing.JProgressBar p1_healthbar;
    private javax.swing.JProgressBar p2_healthbar;
    private javax.swing.JLabel player1_val;
    private javax.swing.JLabel player1_val1;
    private javax.swing.JLabel player1_val2;
    private javax.swing.JLabel player2_val;
    private javax.swing.JPanel stat_div;
    // End of variables declaration//GEN-END:variables
}
